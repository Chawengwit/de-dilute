@use "variables" as v;

.product-action{
  margin: var(--spacing-lg) 0;
}

/* ===============================
   Product Grid
   =============================== */
.product-list {
  display: grid;
  gap: var(--spacing-lg);
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  margin-top: var(--spacing-md);
  align-items: stretch;
}

/* ===============================
   Liquid Glass Product Card
   =============================== */
.product-card {
  /* Liquid glass base */
  position: relative;
  display: flex;
  flex-direction: column;
  border-radius: var(--border-radius-2xl);
  background: var(--glass-bg-medium);
  border: 2px solid var(--glass-border);
  box-shadow: var(--shadow-lg);
  color: var(--color-text);
  overflow: hidden;
  isolation: isolate; /* keep blobs under content */
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);

  /* Floating feel on hover */
  &:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
    border-color: color-mix(in srgb, var(--glass-border), var(--color-white) 25%);
  }

  /* Animated liquid blobs */
  &::before,
  &::after {
    content: "";
    position: absolute;
    top: -55%;
    left: -50%;
    width: 210%;
    height: 210%;
    border-radius: 40%;
    z-index: 0; /* remain behind content */
    pointer-events: none;
  }

  &::before {
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.14), transparent 70%);
    animation: productBlobMove1 18s ease-in-out infinite;
  }

  &::after {
    background: radial-gradient(circle at 70% 30%, rgba(255,255,255,0.08), transparent 70%);
    animation: productBlobMove2 25s ease-in-out infinite;
  }

  /* ==========================
     Media
     ========================== */
  .product-image {
    position: relative;
    z-index: 1;
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
    border-bottom: 1px solid color-mix(in srgb, var(--glass-border), transparent 50%);

    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      transform: scale(1.0);
      transition: transform var(--transition-fast), filter var(--transition-fast);
    }

    /* gentle zoom on hover */
    &:hover img {
      transform: scale(1.04);
    }
  }

  /* ==========================
     Content
     ========================== */
  .product-content {
    position: relative;
    z-index: 1; /* keep above blobs */
    padding: var(--spacing-md);

    .product-title {
      font-size: var(--font-size-lg);
      font-weight: 700;
      margin-bottom: var(--spacing-xs);
      color: var(--color-text);
      letter-spacing: 0.2px;
    }

    .product-desc {
      font-size: var(--font-size-sm);
      color: var(--color-gray-600);
      margin-bottom: var(--spacing-sm);
      line-height: 1.55;
    }

    .product-price {
      display: inline-block;
      font-size: var(--font-size-base);
      font-weight: 700;
      color: var(--color-primary);
    }

    /* ==========================
       CTA Button (Glass style)
       ========================== */
    .btn-add {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: var(--spacing-sm) var(--spacing-lg);
      font-size: var(--font-size-sm);
      font-weight: 600;
      line-height: 1;
      border-radius: 999px;
      cursor: pointer;

      /* glassy button using vars (works in light/dark) */
      color: var(--button-text);
      background: var(--button-bg);
      border: 2px solid var(--button-border);
      box-shadow: var(--button-shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);

      transition:
        transform var(--transition-fast),
        border-color var(--transition-fast),
        background var(--transition-fast);

      &:hover {
        transform: translateY(-2px);
        border-color: var(--button-border-hover);
        background: color-mix(in srgb, var(--button-bg) 85%, var(--color-white));
      }

      &:active {
        transform: translateY(0);
      }
    }
  }

  .product-actions{
    position: absolute;
    right: var(--spacing-md);
    top: var(--spacing-md);
  }
}

/* ===============================
   Dark mode fine-tune (mostly handled by CSS vars already)
   =============================== */
[data-theme="dark"] {
  .product-card {
    .product-content {
      .product-desc { color: var(--color-gray-400); }
    }
  }
}

/* ===============================
   Reduced Motion
   =============================== */
@media (prefers-reduced-motion: reduce) {
  .product-card {
    transition: none;
    &::before,
    &::after { animation: none; }
    .product-image img { transition: none; }
    .product-content .btn-add { transition: none; }
  }
}

/* ===============================
   Keyframes for liquid blobs
   =============================== */
@keyframes productBlobMove1 {
  0%   { transform: translate(0,0) rotate(0deg) scale(1); }
  50%  { transform: translate(10%, 10%) rotate(180deg) scale(1.05); }
  100% { transform: translate(0,0) rotate(360deg) scale(1); }
}

@keyframes productBlobMove2 {
  0%   { transform: translate(0,0) rotate(0deg) scale(1); }
  50%  { transform: translate(-10%, 5%) rotate(-180deg) scale(0.95); }
  100% { transform: translate(0,0) rotate(-360deg) scale(1); }
}

/* ===============================
   Small screens polish
   =============================== */
@media (max-width: 420px) {
  .product-content {
    padding: var(--spacing-md) !important;
  }
}
